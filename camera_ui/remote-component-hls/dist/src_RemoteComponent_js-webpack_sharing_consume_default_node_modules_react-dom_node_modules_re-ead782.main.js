"use strict";
/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkhls_live_view"] = self["webpackChunkhls_live_view"] || []).push([["src_RemoteComponent_js-webpack_sharing_consume_default_node_modules_react-dom_node_modules_re-ead782"],{

/***/ "./src/CameraLiveView.js":
/*!*******************************!*\
  !*** ./src/CameraLiveView.js ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"webpack/sharing/consume/default/react/react?c673\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _api__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./api */ \"./src/api.js\");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @mui/material */ \"./node_modules/@mui/material/Button/Button.js\");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @mui/material */ \"./node_modules/@mui/material/Dialog/Dialog.js\");\n/* harmony import */ var _mui_material_Stack__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @mui/material/Stack */ \"./node_modules/@mui/material/Stack/Stack.js\");\n/* harmony import */ var _mui_lab__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @mui/lab */ \"./node_modules/@mui/lab/LoadingButton/LoadingButton.js\");\n/* harmony import */ var react_hls_player__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-hls-player */ \"./node_modules/react-hls-player/dist/index.js\");\n/* harmony import */ var _PresetMenu__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./PresetMenu */ \"./src/PresetMenu.js\");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @mui/material */ \"./node_modules/@mui/material/Alert/Alert.js\");\n/* harmony import */ var _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @fortawesome/free-solid-svg-icons */ \"./node_modules/@fortawesome/free-solid-svg-icons/index.mjs\");\n/* harmony import */ var _mui_system__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @mui/system */ \"./node_modules/@mui/system/esm/Box/Box.js\");\n/* harmony import */ var _fortawesome_react_fontawesome__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @fortawesome/react-fontawesome */ \"./node_modules/@fortawesome/react-fontawesome/index.es.js\");\n/* harmony import */ var _mui_icons_material_Settings__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @mui/icons-material/Settings */ \"./node_modules/@mui/icons-material/esm/Settings.js\");\n/* harmony import */ var _mui_icons_material_RestartAlt__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @mui/icons-material/RestartAlt */ \"./node_modules/@mui/icons-material/esm/RestartAlt.js\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react/jsx-runtime */ \"./node_modules/react/jsx-runtime.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return r; }; var t, r = {}, e = Object.prototype, n = e.hasOwnProperty, o = \"function\" == typeof Symbol ? Symbol : {}, i = o.iterator || \"@@iterator\", a = o.asyncIterator || \"@@asyncIterator\", u = o.toStringTag || \"@@toStringTag\"; function c(t, r, e, n) { Object.defineProperty(t, r, { value: e, enumerable: !n, configurable: !n, writable: !n }); } try { c({}, \"\"); } catch (t) { c = function c(t, r, e) { return t[r] = e; }; } function h(r, e, n, o) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype); return c(a, \"_invoke\", function (r, e, n) { var o = 1; return function (i, a) { if (3 === o) throw Error(\"Generator is already running\"); if (4 === o) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var u = n.delegate; if (u) { var c = d(u, n); if (c) { if (c === f) continue; return c; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (1 === o) throw o = 4, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = 3; var h = s(r, e, n); if (\"normal\" === h.type) { if (o = n.done ? 4 : 2, h.arg === f) continue; return { value: h.arg, done: n.done }; } \"throw\" === h.type && (o = 4, n.method = \"throw\", n.arg = h.arg); } }; }(r, n, new Context(o || [])), !0), a; } function s(t, r, e) { try { return { type: \"normal\", arg: t.call(r, e) }; } catch (t) { return { type: \"throw\", arg: t }; } } r.wrap = h; var f = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var l = {}; c(l, i, function () { return this; }); var p = Object.getPrototypeOf, y = p && p(p(x([]))); y && y !== e && n.call(y, i) && (l = y); var v = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(l); function g(t) { [\"next\", \"throw\", \"return\"].forEach(function (r) { c(t, r, function (t) { return this._invoke(r, t); }); }); } function AsyncIterator(t, r) { function e(o, i, a, u) { var c = s(t[o], t, i); if (\"throw\" !== c.type) { var h = c.arg, f = h.value; return f && \"object\" == _typeof(f) && n.call(f, \"__await\") ? r.resolve(f.__await).then(function (t) { e(\"next\", t, a, u); }, function (t) { e(\"throw\", t, a, u); }) : r.resolve(f).then(function (t) { h.value = t, a(h); }, function (t) { return e(\"throw\", t, a, u); }); } u(c.arg); } var o; c(this, \"_invoke\", function (t, n) { function i() { return new r(function (r, o) { e(t, n, r, o); }); } return o = o ? o.then(i, i) : i(); }, !0); } function d(r, e) { var n = e.method, o = r.i[n]; if (o === t) return e.delegate = null, \"throw\" === n && r.i[\"return\"] && (e.method = \"return\", e.arg = t, d(r, e), \"throw\" === e.method) || \"return\" !== n && (e.method = \"throw\", e.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), f; var i = s(o, r.i, e.arg); if (\"throw\" === i.type) return e.method = \"throw\", e.arg = i.arg, e.delegate = null, f; var a = i.arg; return a ? a.done ? (e[r.r] = a.value, e.next = r.n, \"return\" !== e.method && (e.method = \"next\", e.arg = t), e.delegate = null, f) : a : (e.method = \"throw\", e.arg = new TypeError(\"iterator result is not an object\"), e.delegate = null, f); } function w(t) { this.tryEntries.push(t); } function m(r) { var e = r[4] || {}; e.type = \"normal\", e.arg = t, r[4] = e; } function Context(t) { this.tryEntries = [[-1]], t.forEach(w, this), this.reset(!0); } function x(r) { if (null != r) { var e = r[i]; if (e) return e.call(r); if (\"function\" == typeof r.next) return r; if (!isNaN(r.length)) { var o = -1, a = function e() { for (; ++o < r.length;) if (n.call(r, o)) return e.value = r[o], e.done = !1, e; return e.value = t, e.done = !0, e; }; return a.next = a; } } throw new TypeError(_typeof(r) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, c(v, \"constructor\", GeneratorFunctionPrototype), c(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), c(GeneratorFunctionPrototype, u, GeneratorFunction.displayName = \"GeneratorFunction\"), r.isGeneratorFunction = function (t) { var r = \"function\" == typeof t && t.constructor; return !!r && (r === GeneratorFunction || \"GeneratorFunction\" === (r.displayName || r.name)); }, r.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, c(t, u, \"GeneratorFunction\")), t.prototype = Object.create(v), t; }, r.awrap = function (t) { return { __await: t }; }, g(AsyncIterator.prototype), c(AsyncIterator.prototype, a, function () { return this; }), r.AsyncIterator = AsyncIterator, r.async = function (t, e, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(h(t, e, n, o), i); return r.isGeneratorFunction(e) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, g(v), c(v, u, \"Generator\"), c(v, i, function () { return this; }), c(v, \"toString\", function () { return \"[object Generator]\"; }), r.keys = function (t) { var r = Object(t), e = []; for (var n in r) e.unshift(n); return function t() { for (; e.length;) if ((n = e.pop()) in r) return t.value = n, t.done = !1, t; return t.done = !0, t; }; }, r.values = x, Context.prototype = { constructor: Context, reset: function reset(r) { if (this.prev = this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(m), !r) for (var e in this) \"t\" === e.charAt(0) && n.call(this, e) && !isNaN(+e.slice(1)) && (this[e] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0][4]; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(r) { if (this.done) throw r; var e = this; function n(t) { a.type = \"throw\", a.arg = r, e.next = t; } for (var o = e.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i[4], u = this.prev, c = i[1], h = i[2]; if (-1 === i[0]) return n(\"end\"), !1; if (!c && !h) throw Error(\"try statement without catch or finally\"); if (null != i[0] && i[0] <= u) { if (u < c) return this.method = \"next\", this.arg = t, n(c), !0; if (u < h) return n(h), !1; } } }, abrupt: function abrupt(t, r) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var n = this.tryEntries[e]; if (n[0] > -1 && n[0] <= this.prev && this.prev < n[2]) { var o = n; break; } } o && (\"break\" === t || \"continue\" === t) && o[0] <= r && r <= o[2] && (o = null); var i = o ? o[4] : {}; return i.type = t, i.arg = r, o ? (this.method = \"next\", this.next = o[2], f) : this.complete(i); }, complete: function complete(t, r) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && r && (this.next = r), f; }, finish: function finish(t) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var e = this.tryEntries[r]; if (e[2] === t) return this.complete(e[4], e[3]), m(e), f; } }, \"catch\": function _catch(t) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var e = this.tryEntries[r]; if (e[0] === t) { var n = e[4]; if (\"throw\" === n.type) { var o = n.arg; m(e); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(r, e, n) { return this.delegate = { i: x(r), r: e, n: n }, \"next\" === this.method && (this.arg = t), f; } }, r; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\nfunction _slicedToArray(r, e) { return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(r, a) { if (r) { if (\"string\" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }\nfunction _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(r) { if (Array.isArray(r)) return r; }\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar CameraLiveView = function CameraLiveView(_ref) {\n  var agentId = _ref.agentId,\n    camName = _ref.camName,\n    camType = _ref.camType,\n    camHostname = _ref.camHostname,\n    camManagePort = _ref.camManagePort,\n    rtspServerHost = _ref.rtspServerHost,\n    rtspServerPort = _ref.rtspServerPort,\n    camPresets = _ref.camPresets,\n    activePreset = _ref.activePreset;\n  var _useState = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(function () {\n      return new _api__WEBPACK_IMPORTED_MODULE_1__[\"default\"]();\n    }),\n    _useState2 = _slicedToArray(_useState, 1),\n    apiClient = _useState2[0];\n  var _useState3 = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(\"\"),\n    _useState4 = _slicedToArray(_useState3, 2),\n    playerSource = _useState4[0],\n    setPlayerSource = _useState4[1];\n  var _useState5 = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null),\n    _useState6 = _slicedToArray(_useState5, 2),\n    tunnel = _useState6[0],\n    setTunnel = _useState6[1];\n  var _useState7 = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null),\n    _useState8 = _slicedToArray(_useState7, 2),\n    managementTunnel = _useState8[0],\n    setManagementTunnel = _useState8[1];\n  var _useState9 = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false),\n    _useState0 = _slicedToArray(_useState9, 2),\n    managementPopup = _useState0[0],\n    setManagementPopup = _useState0[1];\n  var _useState1 = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false),\n    _useState10 = _slicedToArray(_useState1, 2),\n    loading = _useState10[0],\n    setLoading = _useState10[1];\n  var _useState11 = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false),\n    _useState12 = _slicedToArray(_useState11, 2),\n    manageRedirectLoading = _useState12[0],\n    setManageRedirectLoading = _useState12[1];\n  var _useState13 = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false),\n    _useState14 = _slicedToArray(_useState13, 2),\n    showLiveView = _useState14[0],\n    setShowLiveView = _useState14[1];\n  var _useState15 = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null),\n    _useState16 = _slicedToArray(_useState15, 2),\n    countdown = _useState16[0],\n    setCountdown = _useState16[1];\n  var _useState17 = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false),\n    _useState18 = _slicedToArray(_useState17, 2),\n    showAlert = _useState18[0],\n    setShowAlert = _useState18[1];\n  var playerRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n  rtspServerHost = rtspServerHost || \"localhost\";\n  rtspServerPort = rtspServerPort || 8083;\n  var gotoPreset = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(preset) {\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return apiClient.sendControlCommand(\"camera_control\", camName, agentId, {\n              \"action\": \"power_on\",\n              \"value\": 1\n            });\n          case 2:\n            _context.next = 4;\n            return apiClient.sendControlCommand(\"camera_control\", camName, agentId, {\n              \"action\": \"goto_preset\",\n              \"value\": preset\n            });\n          case 4:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee);\n    }));\n    return function gotoPreset(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  var setupTunnel = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n      var countdownInterval, startCountdown, resp, tunnels, tunnel, managementTunnel;\n      return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n        while (1) switch (_context2.prev = _context2.next) {\n          case 0:\n            setLoading(true);\n            setCountdown(90);\n            setShowAlert(true);\n            startCountdown = function startCountdown() {\n              countdownInterval = setInterval(function () {\n                setCountdown(function (prev) {\n                  if (prev <= 5) {\n                    clearInterval(countdownInterval);\n                    setShowAlert(false);\n                    return null;\n                  }\n                  return prev - 5;\n                });\n              }, 5000);\n            };\n            startCountdown();\n            _context2.next = 7;\n            return apiClient.getTunnelList(agentId, false);\n          case 7:\n            resp = _context2.sent;\n            tunnels = resp.tunnels;\n            tunnel = tunnels.find(function (tunnel) {\n              return tunnel.hostname === rtspServerHost && tunnel.port === rtspServerPort;\n            }); // while we've fetched the tunnels, check for a management tunnel...\n            managementTunnel = tunnels.find(function (tunnel) {\n              return tunnel.hostname === camHostname && tunnel.port === camManagePort;\n            });\n            setManagementTunnel(managementTunnel);\n            if (tunnel) {\n              _context2.next = 16;\n              break;\n            }\n            _context2.next = 15;\n            return apiClient.createTunnel(agentId, {\n              name: \"\".concat(camName, \" Live View\"),\n              hostname: rtspServerHost,\n              port: rtspServerPort,\n              protocol: \"http\",\n              is_favourite: true,\n              timeout: 15\n            });\n          case 15:\n            tunnel = _context2.sent;\n          case 16:\n            _context2.next = 18;\n            return apiClient.activateTunnel(tunnel.key);\n          case 18:\n            setTunnel(tunnel);\n            _context2.next = 21;\n            return apiClient.sendControlCommand(\"camera_control\", camName, agentId, {\n              \"action\": \"power_on\",\n              \"value\": 1\n            });\n          case 21:\n            _context2.next = 23;\n            return apiClient.sendControlCommand(\"camera_control\", camName, agentId, {\n              \"action\": \"sync_ui\",\n              \"value\": 1\n            });\n          case 23:\n            // http://192.168.0.98:8083/stream/ptz_cam_1/channel/0/hls/live/index.m3u8\n            setTimeout(function () {\n              setShowLiveView(true);\n              setLoading(false);\n              setPlayerSource(\"https://\".concat(tunnel.endpoint, \"/stream/\").concat(camName, \"/channel/0/hls/live/index.m3u8\"));\n            }, 3000);\n\n            // setTimeout(resetPlayerUrl, 5_000)\n            return _context2.abrupt(\"return\", tunnel);\n          case 25:\n          case \"end\":\n            return _context2.stop();\n        }\n      }, _callee2);\n    }));\n    return function setupTunnel() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n  var setupManageCameraTunnel = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n      var tunnel, tunnels;\n      return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n        while (1) switch (_context3.prev = _context3.next) {\n          case 0:\n            setManageRedirectLoading(true);\n            _context3.next = 3;\n            return apiClient.sendControlCommand(\"camera_control\", camName, agentId, {\n              \"action\": \"power_on\",\n              \"value\": 1\n            });\n          case 3:\n            tunnel = managementTunnel;\n            if (managementTunnel) {\n              _context3.next = 14;\n              break;\n            }\n            _context3.next = 7;\n            return apiClient.getTunnelList(agentId, false);\n          case 7:\n            tunnels = _context3.sent.tunnels;\n            tunnel = tunnels.find(function (tunnel) {\n              return tunnel.hostname === camHostname && tunnel.port === camManagePort;\n            });\n            if (tunnel) {\n              _context3.next = 13;\n              break;\n            }\n            _context3.next = 12;\n            return apiClient.createTunnel(agentId, {\n              name: \"\".concat(camName, \" Management Page\"),\n              hostname: camHostname,\n              port: camManagePort,\n              protocol: \"http\",\n              is_favourite: true,\n              timeout: 30\n            });\n          case 12:\n            tunnel = _context3.sent;\n          case 13:\n            setManagementTunnel(tunnel);\n          case 14:\n            _context3.next = 16;\n            return apiClient.activateTunnel(tunnel.key);\n          case 16:\n            setTimeout(function () {\n              setManageRedirectLoading(false);\n              var res = window.open(\"https://\".concat(tunnel.endpoint), '_blank');\n              if (!res) {\n                setManagementPopup(true);\n              }\n            }, 2000);\n          case 17:\n          case \"end\":\n            return _context3.stop();\n        }\n      }, _callee3);\n    }));\n    return function setupManageCameraTunnel() {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n  var teardownLiveView = /*#__PURE__*/function () {\n    var _ref5 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {\n      return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n        while (1) switch (_context4.prev = _context4.next) {\n          case 0:\n            setShowLiveView(false);\n            _context4.next = 3;\n            return apiClient.deactivateTunnel(tunnel.key);\n          case 3:\n            setPlayerSource(null);\n          case 4:\n          case \"end\":\n            return _context4.stop();\n        }\n      }, _callee4);\n    }));\n    return function teardownLiveView() {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n  var resetPlayerUrl = function resetPlayerUrl() {\n    var baseUrl = playerSource.split(\"?\")[0];\n    var refreshedUrl = \"\".concat(baseUrl, \"?t=\").concat(Date.now());\n    apiClient.sendControlCommand(\"camera_control\", camName, agentId, {\n      \"action\": \"power_on\",\n      \"value\": 1\n    });\n    apiClient.sendControlCommand(\"camera_control\", camName, agentId, {\n      \"action\": \"sync_ui\",\n      \"value\": 1\n    });\n    setPlayerSource(refreshedUrl);\n  };\n  var presetMenu = camPresets.length > 0 ? /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_PresetMenu__WEBPACK_IMPORTED_MODULE_3__[\"default\"], {\n    presets: camPresets,\n    activePreset: activePreset,\n    onSelect: gotoPreset\n  }) : null;\n  var liveView = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(function () {\n    return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(react_hls_player__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n      playerRef: playerRef,\n      src: playerSource,\n      autoPlay: true,\n      controls: true,\n      width: \"100%\",\n      hlsConfig: {\n        // see: https://github.com/video-dev/hls.js/issues/3077#issuecomment-704961806\n        \"enableWorker\": true,\n        \"maxBufferLength\": 1,\n        \"lowLatencyMode\": true\n        // \"liveBackBufferLength\": 0,\n        // \"liveSyncDuration\": 0,\n        // \"liveMaxLatencyDuration\": 5,\n        // \"liveDurationInfinity\": true,\n        // \"highBufferWatchdogPeriod\": 1,\n      }\n      // hlsConfig={{\n      //   maxLoadingDelay: 4,\n      //   minAutoBitrate: 0,\n      //   lowLatencyMode: true,\n      // }}\n    }, playerSource);\n  }, [playerSource]);\n\n  // Handle HLS.js events\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n    var _playerRef$current;\n    var hls = (_playerRef$current = playerRef.current) === null || _playerRef$current === void 0 ? void 0 : _playerRef$current.hls;\n    if (hls) {\n      hls.on(hls.constructor.Events.ERROR, function (_, data) {\n        console.error(\"HLS.js Error:\", data);\n      });\n      hls.on(hls.constructor.Events.MANIFEST_PARSED, function () {\n        setCountdown(null);\n        setShowAlert(false);\n        console.log(\"HLS manifest parsed, ready to play.\");\n      });\n    }\n  }, [playerSource]);\n  var disableButton = /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {\n    variant: \"outlined\",\n    color: \"primary\",\n    onClick: teardownLiveView,\n    children: \"Close Live View\"\n  });\n  var manageCamera = /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {\n    loading: manageRedirectLoading,\n    variant: \"outlined\",\n    onClick: setupManageCameraTunnel,\n    startIcon: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_mui_icons_material_Settings__WEBPACK_IMPORTED_MODULE_7__[\"default\"], {}),\n    children: \"Settings\"\n  });\n  var resetStream = /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {\n    variant: \"outlined\",\n    color: \"primary\",\n    onClick: resetPlayerUrl,\n    startIcon: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_mui_icons_material_RestartAlt__WEBPACK_IMPORTED_MODULE_8__[\"default\"], {}),\n    children: \"Reset Stream\"\n  });\n  if (!showLiveView) {\n    return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_mui_material_Stack__WEBPACK_IMPORTED_MODULE_9__[\"default\"], {\n      padding: \"20px\",\n      justifySelf: \"center\",\n      maxWidth: \"sm\",\n      children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_mui_lab__WEBPACK_IMPORTED_MODULE_10__[\"default\"], {\n        variant: \"outlined\",\n        onClick: setupTunnel,\n        loading: loading,\n        children: \"Enable Live View\"\n      })\n    });\n  }\n  var managementPopupElem = managementPopup ? /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_11__[\"default\"], {\n    open: managementPopup,\n    onClose: function onClose() {\n      return setManagementPopup(false);\n    },\n    \"aria-labelledby\": \"alert-dialog-title\",\n    \"aria-describedby\": \"alert-dialog-description\",\n    children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_mui_system__WEBPACK_IMPORTED_MODULE_12__[\"default\"], {\n      padding: 5,\n      children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {\n        endIcon: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_fortawesome_react_fontawesome__WEBPACK_IMPORTED_MODULE_4__.FontAwesomeIcon, {\n          icon: _fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_13__.faUpRightFromSquare\n        }),\n        target: \"_blank\",\n        href: \"https://\".concat(managementTunnel.endpoint),\n        color: \"primary\",\n        variant: \"outlined\",\n        onClick: function onClick() {\n          return setManagementPopup(false);\n        },\n        children: \"Open Camera Management Page\"\n      })\n    })\n  }) : null;\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)((react__WEBPACK_IMPORTED_MODULE_0___default().Fragment), {\n    children: [managementPopupElem, /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_mui_material_Stack__WEBPACK_IMPORTED_MODULE_9__[\"default\"], {\n      spacing: 2,\n      direction: \"column\",\n      padding: \"20px\",\n      children: [showAlert && countdown !== null && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_mui_material__WEBPACK_IMPORTED_MODULE_14__[\"default\"], {\n        severity: \"info\",\n        children: [\"Camera may take \", countdown, \" second\", countdown !== 1 ? 's' : '', \" to awaken from sleep\"]\n      }), liveView, presetMenu, /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_mui_material_Stack__WEBPACK_IMPORTED_MODULE_9__[\"default\"], {\n        direction: \"row\",\n        justifyContent: \"center\",\n        spacing: 5,\n        children: [resetStream, manageCamera]\n      })]\n    })]\n  });\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (CameraLiveView);\n\n//# sourceURL=webpack://hls_live_view/./src/CameraLiveView.js?");

/***/ }),

/***/ "./src/PresetMenu.js":
/*!***************************!*\
  !*** ./src/PresetMenu.js ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"webpack/sharing/consume/default/react/react?c673\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @mui/material */ \"./node_modules/@mui/material/Button/Button.js\");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @mui/material */ \"./node_modules/@mui/material/InputLabel/InputLabel.js\");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @mui/material */ \"./node_modules/@mui/material/Select/Select.js\");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @mui/material */ \"./node_modules/@mui/material/MenuItem/MenuItem.js\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react/jsx-runtime */ \"./node_modules/react/jsx-runtime.js\");\nfunction _slicedToArray(r, e) { return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(r, a) { if (r) { if (\"string\" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }\nfunction _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(r) { if (Array.isArray(r)) return r; }\n\n\n\nvar PresetMenu = function PresetMenu(_ref) {\n  var presets = _ref.presets,\n    activePreset = _ref.activePreset,\n    onSelect = _ref.onSelect;\n  var _React$useState = react__WEBPACK_IMPORTED_MODULE_0___default().useState(\"\"),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    selected = _React$useState2[0],\n    setSelected = _React$useState2[1];\n  var _React$useState3 = react__WEBPACK_IMPORTED_MODULE_0___default().useState(false),\n    _React$useState4 = _slicedToArray(_React$useState3, 2),\n    loading = _React$useState4[0],\n    setLoading = _React$useState4[1];\n  var handleChange = function handleChange(event) {\n    setSelected(event.target.value);\n    setLoading(true);\n    setTimeout(function () {\n      setLoading(false);\n    }, 6000);\n    onSelect(event.target.value);\n  };\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n    setSelected(activePreset || \"\");\n  }, [activePreset]);\n  if (loading) {\n    return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n      fullWidth: true,\n      loading: true,\n      loadingPosition: \"start\",\n      variant: \"outlined\",\n      children: \"Loading Preset...\"\n    });\n  }\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(\"div\", {\n    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_3__[\"default\"], {\n      id: \"preset-menu-select-label\",\n      children: \"Preset Position\"\n    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n      variant: \"outlined\",\n      isLoading: true,\n      id: \"preset-menu-select\",\n      labelId: \"preset-menu-select-label\",\n      value: selected,\n      onChange: handleChange,\n      label: \"Preset Positions\",\n      fullWidth: true,\n      children: presets.map(function (preset, index) {\n        return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_mui_material__WEBPACK_IMPORTED_MODULE_5__[\"default\"], {\n          value: preset,\n          children: preset\n        }, index);\n      })\n    })]\n  });\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (PresetMenu);\n\n//# sourceURL=webpack://hls_live_view/./src/PresetMenu.js?");

/***/ }),

/***/ "./src/RemoteComponent.js":
/*!********************************!*\
  !*** ./src/RemoteComponent.js ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ RemoteComponent)\n/* harmony export */ });\n/* harmony import */ var doover_home_RemoteAccess__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! doover_home/RemoteAccess */ \"webpack/container/remote/doover_home/RemoteAccess\");\n/* harmony import */ var doover_home_RemoteAccess__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(doover_home_RemoteAccess__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"webpack/sharing/consume/default/react/react?c673\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _CameraLiveView__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./CameraLiveView */ \"./src/CameraLiveView.js\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react/jsx-runtime */ \"./node_modules/react/jsx-runtime.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(t, e) { if (e && (\"object\" == _typeof(e) || \"function\" == typeof e)) return e; if (void 0 !== e) throw new TypeError(\"Derived constructors may only return object or undefined\"); return _assertThisInitialized(t); }\nfunction _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); return e; }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }\nfunction _inherits(t, e) { if (\"function\" != typeof e && null !== e) throw new TypeError(\"Super expression must either be null or a function\"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, \"prototype\", { writable: !1 }), e && _setPrototypeOf(t, e); }\nfunction _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }\n\n\n\n\nvar RemoteComponent = /*#__PURE__*/function (_RemoteAccess) {\n  function RemoteComponent() {\n    _classCallCheck(this, RemoteComponent);\n    return _callSuper(this, RemoteComponent, arguments);\n  }\n  _inherits(RemoteComponent, _RemoteAccess);\n  return _createClass(RemoteComponent, [{\n    key: \"render\",\n    value: function render() {\n      var _reported$rtspServerH, _reported$rtspServerP;\n      var agent_id = this.getUi().agent_key;\n      var ui = this.getUiState();\n      var reported = ui.reported;\n      var cam_name = reported.cam_name || reported.name;\n      var cam_settings = ui.desired[cam_name];\n      var presets = (cam_settings === null || cam_settings === void 0 ? void 0 : cam_settings.presets) || [];\n      var activePreset = cam_settings === null || cam_settings === void 0 ? void 0 : cam_settings.active_preset;\n\n      // console.log(reported);\n      return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_CameraLiveView__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n        agentId: agent_id,\n        camName: cam_name,\n        camType: reported.cam_type,\n        camHostname: reported.address,\n        camManagePort: reported.managePort || 80,\n        rtspServerHost: (_reported$rtspServerH = reported === null || reported === void 0 ? void 0 : reported.rtspServerHost) !== null && _reported$rtspServerH !== void 0 ? _reported$rtspServerH : \"localhost\",\n        rtspServerPort: (_reported$rtspServerP = reported === null || reported === void 0 ? void 0 : reported.rtspServerPort) !== null && _reported$rtspServerP !== void 0 ? _reported$rtspServerP : 8083,\n        camPresets: presets,\n        activePreset: activePreset\n      });\n    }\n  }]);\n}((doover_home_RemoteAccess__WEBPACK_IMPORTED_MODULE_0___default()));\n\n\n//# sourceURL=webpack://hls_live_view/./src/RemoteComponent.js?");

/***/ }),

/***/ "./src/api.js":
/*!********************!*\
  !*** ./src/api.js ***!
  \********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ ApiClient)\n/* harmony export */ });\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return r; }; var t, r = {}, e = Object.prototype, n = e.hasOwnProperty, o = \"function\" == typeof Symbol ? Symbol : {}, i = o.iterator || \"@@iterator\", a = o.asyncIterator || \"@@asyncIterator\", u = o.toStringTag || \"@@toStringTag\"; function c(t, r, e, n) { Object.defineProperty(t, r, { value: e, enumerable: !n, configurable: !n, writable: !n }); } try { c({}, \"\"); } catch (t) { c = function c(t, r, e) { return t[r] = e; }; } function h(r, e, n, o) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype); return c(a, \"_invoke\", function (r, e, n) { var o = 1; return function (i, a) { if (3 === o) throw Error(\"Generator is already running\"); if (4 === o) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var u = n.delegate; if (u) { var c = d(u, n); if (c) { if (c === f) continue; return c; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (1 === o) throw o = 4, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = 3; var h = s(r, e, n); if (\"normal\" === h.type) { if (o = n.done ? 4 : 2, h.arg === f) continue; return { value: h.arg, done: n.done }; } \"throw\" === h.type && (o = 4, n.method = \"throw\", n.arg = h.arg); } }; }(r, n, new Context(o || [])), !0), a; } function s(t, r, e) { try { return { type: \"normal\", arg: t.call(r, e) }; } catch (t) { return { type: \"throw\", arg: t }; } } r.wrap = h; var f = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var l = {}; c(l, i, function () { return this; }); var p = Object.getPrototypeOf, y = p && p(p(x([]))); y && y !== e && n.call(y, i) && (l = y); var v = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(l); function g(t) { [\"next\", \"throw\", \"return\"].forEach(function (r) { c(t, r, function (t) { return this._invoke(r, t); }); }); } function AsyncIterator(t, r) { function e(o, i, a, u) { var c = s(t[o], t, i); if (\"throw\" !== c.type) { var h = c.arg, f = h.value; return f && \"object\" == _typeof(f) && n.call(f, \"__await\") ? r.resolve(f.__await).then(function (t) { e(\"next\", t, a, u); }, function (t) { e(\"throw\", t, a, u); }) : r.resolve(f).then(function (t) { h.value = t, a(h); }, function (t) { return e(\"throw\", t, a, u); }); } u(c.arg); } var o; c(this, \"_invoke\", function (t, n) { function i() { return new r(function (r, o) { e(t, n, r, o); }); } return o = o ? o.then(i, i) : i(); }, !0); } function d(r, e) { var n = e.method, o = r.i[n]; if (o === t) return e.delegate = null, \"throw\" === n && r.i[\"return\"] && (e.method = \"return\", e.arg = t, d(r, e), \"throw\" === e.method) || \"return\" !== n && (e.method = \"throw\", e.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), f; var i = s(o, r.i, e.arg); if (\"throw\" === i.type) return e.method = \"throw\", e.arg = i.arg, e.delegate = null, f; var a = i.arg; return a ? a.done ? (e[r.r] = a.value, e.next = r.n, \"return\" !== e.method && (e.method = \"next\", e.arg = t), e.delegate = null, f) : a : (e.method = \"throw\", e.arg = new TypeError(\"iterator result is not an object\"), e.delegate = null, f); } function w(t) { this.tryEntries.push(t); } function m(r) { var e = r[4] || {}; e.type = \"normal\", e.arg = t, r[4] = e; } function Context(t) { this.tryEntries = [[-1]], t.forEach(w, this), this.reset(!0); } function x(r) { if (null != r) { var e = r[i]; if (e) return e.call(r); if (\"function\" == typeof r.next) return r; if (!isNaN(r.length)) { var o = -1, a = function e() { for (; ++o < r.length;) if (n.call(r, o)) return e.value = r[o], e.done = !1, e; return e.value = t, e.done = !0, e; }; return a.next = a; } } throw new TypeError(_typeof(r) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, c(v, \"constructor\", GeneratorFunctionPrototype), c(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), c(GeneratorFunctionPrototype, u, GeneratorFunction.displayName = \"GeneratorFunction\"), r.isGeneratorFunction = function (t) { var r = \"function\" == typeof t && t.constructor; return !!r && (r === GeneratorFunction || \"GeneratorFunction\" === (r.displayName || r.name)); }, r.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, c(t, u, \"GeneratorFunction\")), t.prototype = Object.create(v), t; }, r.awrap = function (t) { return { __await: t }; }, g(AsyncIterator.prototype), c(AsyncIterator.prototype, a, function () { return this; }), r.AsyncIterator = AsyncIterator, r.async = function (t, e, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(h(t, e, n, o), i); return r.isGeneratorFunction(e) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, g(v), c(v, u, \"Generator\"), c(v, i, function () { return this; }), c(v, \"toString\", function () { return \"[object Generator]\"; }), r.keys = function (t) { var r = Object(t), e = []; for (var n in r) e.unshift(n); return function t() { for (; e.length;) if ((n = e.pop()) in r) return t.value = n, t.done = !1, t; return t.done = !0, t; }; }, r.values = x, Context.prototype = { constructor: Context, reset: function reset(r) { if (this.prev = this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(m), !r) for (var e in this) \"t\" === e.charAt(0) && n.call(this, e) && !isNaN(+e.slice(1)) && (this[e] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0][4]; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(r) { if (this.done) throw r; var e = this; function n(t) { a.type = \"throw\", a.arg = r, e.next = t; } for (var o = e.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i[4], u = this.prev, c = i[1], h = i[2]; if (-1 === i[0]) return n(\"end\"), !1; if (!c && !h) throw Error(\"try statement without catch or finally\"); if (null != i[0] && i[0] <= u) { if (u < c) return this.method = \"next\", this.arg = t, n(c), !0; if (u < h) return n(h), !1; } } }, abrupt: function abrupt(t, r) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var n = this.tryEntries[e]; if (n[0] > -1 && n[0] <= this.prev && this.prev < n[2]) { var o = n; break; } } o && (\"break\" === t || \"continue\" === t) && o[0] <= r && r <= o[2] && (o = null); var i = o ? o[4] : {}; return i.type = t, i.arg = r, o ? (this.method = \"next\", this.next = o[2], f) : this.complete(i); }, complete: function complete(t, r) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && r && (this.next = r), f; }, finish: function finish(t) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var e = this.tryEntries[r]; if (e[2] === t) return this.complete(e[4], e[3]), m(e), f; } }, \"catch\": function _catch(t) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var e = this.tryEntries[r]; if (e[0] === t) { var n = e[4]; if (\"throw\" === n.type) { var o = n.arg; m(e); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(r, e, n) { return this.delegate = { i: x(r), r: e, n: n }, \"next\" === this.method && (this.arg = t), f; } }, r; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n// Basic API client for some tunnel REST actions.\n// Copied from main doover repo api client.\nvar ApiClient = /*#__PURE__*/function () {\n  function ApiClient() {\n    _classCallCheck(this, ApiClient);\n    this.domain = \"https://\".concat(window.location.href.split('/')[2]);\n    // this.domain = `https://dev.doover.ngrok.app`;\n\n    this.token = null;\n    // this.token = \"9628a728f104e4aacb41fc80b1a127881bb5826a\";\n    this.token_age = null;\n    this.agent_id = null;\n    this.proxy_agent_id = null;\n  }\n  return _createClass(ApiClient, [{\n    key: \"get_temp_token\",\n    value: function () {\n      var _get_temp_token = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return this.get('/ch/v1/get_temp_token/', false);\n            case 2:\n              return _context.abrupt(\"return\", _context.sent);\n            case 3:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, this);\n      }));\n      function get_temp_token() {\n        return _get_temp_token.apply(this, arguments);\n      }\n      return get_temp_token;\n    }()\n  }, {\n    key: \"update_token\",\n    value: function () {\n      var _update_token = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        var _this = this;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return this.get_temp_token().then(function (response) {\n                _this.token = response.token;\n                _this.token_age = Date.now();\n                if (_this.agent_id == null) {\n                  _this.agent_id = response.agent_id;\n                }\n              })[\"catch\"](function (error) {\n                console.log(\"Error updating temp token: \", error);\n                _this.token = null;\n                _this.token_age = null;\n              });\n            case 2:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2, this);\n      }));\n      function update_token() {\n        return _update_token.apply(this, arguments);\n      }\n      return update_token;\n    }() // If the token is older than 5 minutes, update it\n  }, {\n    key: \"ensure_token\",\n    value: function () {\n      var _ensure_token = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) switch (_context3.prev = _context3.next) {\n            case 0:\n              if (!(this.token == null || this.token_age == null || Date.now() - this.token_age > 300000)) {\n                _context3.next = 3;\n                break;\n              }\n              _context3.next = 3;\n              return this.update_token();\n            case 3:\n              if (!(this.token == null)) {\n                _context3.next = 5;\n                break;\n              }\n              throw new Error(\"Token not available\");\n            case 5:\n            case \"end\":\n              return _context3.stop();\n          }\n        }, _callee3, this);\n      }));\n      function ensure_token() {\n        return _ensure_token.apply(this, arguments);\n      }\n      return ensure_token;\n    }()\n  }, {\n    key: \"_request\",\n    value: function () {\n      var _request2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(url) {\n        var method,\n          body,\n          extraData,\n          confirm_token,\n          headers,\n          options,\n          response,\n          text,\n          _args4 = arguments;\n        return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n          while (1) switch (_context4.prev = _context4.next) {\n            case 0:\n              method = _args4.length > 1 && _args4[1] !== undefined ? _args4[1] : 'GET';\n              body = _args4.length > 2 && _args4[2] !== undefined ? _args4[2] : null;\n              extraData = _args4.length > 3 && _args4[3] !== undefined ? _args4[3] : {};\n              confirm_token = _args4.length > 4 && _args4[4] !== undefined ? _args4[4] : true;\n              if (!confirm_token) {\n                _context4.next = 7;\n                break;\n              }\n              _context4.next = 7;\n              return this.ensure_token();\n            case 7:\n              headers = this._constructHeaders(this.token, this.proxy_agent_id);\n              options = {\n                method: method,\n                headers: headers\n              };\n              if (body) {\n                options.body = JSON.stringify(body);\n              }\n              _context4.prev = 10;\n              _context4.next = 13;\n              return fetch(this.domain + url, options);\n            case 13:\n              response = _context4.sent;\n              if (response.ok) {\n                _context4.next = 16;\n                break;\n              }\n              throw new Error(\"HTTP error! status: \".concat(response.status));\n            case 16:\n              _context4.next = 18;\n              return response.text();\n            case 18:\n              text = _context4.sent;\n              _context4.prev = 19;\n              return _context4.abrupt(\"return\", JSON.parse(text));\n            case 23:\n              _context4.prev = 23;\n              _context4.t0 = _context4[\"catch\"](19);\n              return _context4.abrupt(\"return\", text);\n            case 26:\n              _context4.next = 32;\n              break;\n            case 28:\n              _context4.prev = 28;\n              _context4.t1 = _context4[\"catch\"](10);\n              console.error(\"Fetch \".concat(method, \" error:\"), _context4.t1);\n              return _context4.abrupt(\"return\", undefined);\n            case 32:\n            case \"end\":\n              return _context4.stop();\n          }\n        }, _callee4, this, [[10, 28], [19, 23]]);\n      }));\n      function _request(_x) {\n        return _request2.apply(this, arguments);\n      }\n      return _request;\n    }()\n  }, {\n    key: \"_constructHeaders\",\n    value: function _constructHeaders(token) {\n      var proxy_agent_id = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n      var headers = {\n        'Content-Type': 'application/json',\n        'Authorization': \"Token \".concat(token)\n      };\n      if (proxy_agent_id) {\n        headers['X-Proxy-Agent'] = proxy_agent_id;\n      }\n      return headers;\n    }\n  }, {\n    key: \"get\",\n    value: function () {\n      var _get = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(url) {\n        var confirm_token,\n          _args5 = arguments;\n        return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n          while (1) switch (_context5.prev = _context5.next) {\n            case 0:\n              confirm_token = _args5.length > 1 && _args5[1] !== undefined ? _args5[1] : true;\n              _context5.next = 3;\n              return this._request(url, 'GET', null, {}, confirm_token);\n            case 3:\n              return _context5.abrupt(\"return\", _context5.sent);\n            case 4:\n            case \"end\":\n              return _context5.stop();\n          }\n        }, _callee5, this);\n      }));\n      function get(_x2) {\n        return _get.apply(this, arguments);\n      }\n      return get;\n    }()\n  }, {\n    key: \"post\",\n    value: function () {\n      var _post = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee6(url, body) {\n        var extraData,\n          _args6 = arguments;\n        return _regeneratorRuntime().wrap(function _callee6$(_context6) {\n          while (1) switch (_context6.prev = _context6.next) {\n            case 0:\n              extraData = _args6.length > 2 && _args6[2] !== undefined ? _args6[2] : {};\n              _context6.next = 3;\n              return this._request(url, 'POST', body, extraData);\n            case 3:\n              return _context6.abrupt(\"return\", _context6.sent);\n            case 4:\n            case \"end\":\n              return _context6.stop();\n          }\n        }, _callee6, this);\n      }));\n      function post(_x3, _x4) {\n        return _post.apply(this, arguments);\n      }\n      return post;\n    }()\n  }, {\n    key: \"getTunnelList\",\n    value: function () {\n      var _getTunnelList = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee7(agentId) {\n        var show_choices,\n          url,\n          _args7 = arguments;\n        return _regeneratorRuntime().wrap(function _callee7$(_context7) {\n          while (1) switch (_context7.prev = _context7.next) {\n            case 0:\n              show_choices = _args7.length > 1 && _args7[1] !== undefined ? _args7[1] : true;\n              url = \"/ch/v1/agent/\".concat(agentId, \"/dd_tunnels/\");\n              if (show_choices) {\n                url += \"?choices=true\";\n              }\n              _context7.next = 5;\n              return this.get(url);\n            case 5:\n              return _context7.abrupt(\"return\", _context7.sent);\n            case 6:\n            case \"end\":\n              return _context7.stop();\n          }\n        }, _callee7, this);\n      }));\n      function getTunnelList(_x5) {\n        return _getTunnelList.apply(this, arguments);\n      }\n      return getTunnelList;\n    }()\n  }, {\n    key: \"createTunnel\",\n    value: function () {\n      var _createTunnel = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee8(agentId, data) {\n        return _regeneratorRuntime().wrap(function _callee8$(_context8) {\n          while (1) switch (_context8.prev = _context8.next) {\n            case 0:\n              _context8.next = 2;\n              return this.post(\"/ch/v1/agent/\".concat(agentId, \"/dd_tunnels/\"), data);\n            case 2:\n              return _context8.abrupt(\"return\", _context8.sent);\n            case 3:\n            case \"end\":\n              return _context8.stop();\n          }\n        }, _callee8, this);\n      }));\n      function createTunnel(_x6, _x7) {\n        return _createTunnel.apply(this, arguments);\n      }\n      return createTunnel;\n    }()\n  }, {\n    key: \"activateTunnel\",\n    value: function () {\n      var _activateTunnel = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee9(tunnelId) {\n        return _regeneratorRuntime().wrap(function _callee9$(_context9) {\n          while (1) switch (_context9.prev = _context9.next) {\n            case 0:\n              _context9.next = 2;\n              return this.post(\"/ch/v1/tunnels/\".concat(tunnelId, \"/activate/\"), {});\n            case 2:\n              return _context9.abrupt(\"return\", _context9.sent);\n            case 3:\n            case \"end\":\n              return _context9.stop();\n          }\n        }, _callee9, this);\n      }));\n      function activateTunnel(_x8) {\n        return _activateTunnel.apply(this, arguments);\n      }\n      return activateTunnel;\n    }()\n  }, {\n    key: \"deactivateTunnel\",\n    value: function () {\n      var _deactivateTunnel = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee0(tunnelId) {\n        return _regeneratorRuntime().wrap(function _callee0$(_context0) {\n          while (1) switch (_context0.prev = _context0.next) {\n            case 0:\n              _context0.next = 2;\n              return this.post(\"/ch/v1/tunnels/\".concat(tunnelId, \"/deactivate/\"), {});\n            case 2:\n              return _context0.abrupt(\"return\", _context0.sent);\n            case 3:\n            case \"end\":\n              return _context0.stop();\n          }\n        }, _callee0, this);\n      }));\n      function deactivateTunnel(_x9) {\n        return _deactivateTunnel.apply(this, arguments);\n      }\n      return deactivateTunnel;\n    }()\n  }, {\n    key: \"sendControlCommand\",\n    value: function () {\n      var _sendControlCommand = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee1(channel, camName, agentId, payload) {\n        var to_send;\n        return _regeneratorRuntime().wrap(function _callee1$(_context1) {\n          while (1) switch (_context1.prev = _context1.next) {\n            case 0:\n              payload[\"task_id\"] = window.crypto.randomUUID();\n              to_send = _defineProperty({}, \"\".concat(camName), payload);\n              _context1.next = 4;\n              return this.ensure_token();\n            case 4:\n              _context1.next = 6;\n              return this._request(\"/ch/v1/agent/\".concat(agentId, \"/\").concat(channel, \"/aggregate/\"), \"POST\", to_send);\n            case 6:\n              return _context1.abrupt(\"return\", _context1.sent);\n            case 7:\n            case \"end\":\n              return _context1.stop();\n          }\n        }, _callee1, this);\n      }));\n      function sendControlCommand(_x0, _x1, _x10, _x11) {\n        return _sendControlCommand.apply(this, arguments);\n      }\n      return sendControlCommand;\n    }()\n  }]);\n}();\n\n\n//# sourceURL=webpack://hls_live_view/./src/api.js?");

/***/ })

}]);